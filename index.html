<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drum Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f1f5f9;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        
        .drum-pad {
            transition: all 0.1s ease-in-out;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e2e8f0;
        }

        .drum-pad:hover {
            border-color: #94a3b8;
            transform: translateY(-2px);
        }
        
        .drum-pad:active, .drum-pad.active {
            transform: scale(0.95);
            box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .power-toggle {
            position: relative;
            width: 52px;
            height: 30px;
            background: #cbd5e1;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .power-toggle.on {
            background-color: #4f46e5;
        }

        .power-toggle-handle {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .power-toggle.on .power-toggle-handle {
            transform: translateX(22px);
        }

        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }

        input[type="range"]:hover {
            opacity: 1;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        const drumPads = [
            {
                key: 'Q',
                keyCode: 81,
                id: 'Heater-1',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3'
            },
            {
                key: 'W',
                keyCode: 87,
                id: 'Heater-2',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3'
            },
            {
                key: 'E',
                keyCode: 69,
                id: 'Heater-3',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3'
            },
            {
                key: 'A',
                keyCode: 65,
                id: 'Heater-4',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3'
            },
            {
                key: 'S',
                keyCode: 83,
                id: 'Clap',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3'
            },
            {
                key: 'D',
                keyCode: 68,
                id: 'Open-HH',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3'
            },
            {
                key: 'Z',
                keyCode: 90,
                id: 'Kick-n\'-Hat',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3'
            },
            {
                key: 'X',
                keyCode: 88,
                id: 'Kick',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3'
            },
            {
                key: 'C',
                keyCode: 67,
                id: 'Closed-HH',
                url: 'https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3'
            }
        ];

        const DrumMachine = () => {
            const [displayText, setDisplayText] = useState('Press a key!');
            const [powerOn, setPowerOn] = useState(true);
            const [volume, setVolume] = useState(80);
            
            const playSound = useCallback((drumPad) => {
                if (!powerOn) return;
                
                const audio = document.getElementById(drumPad.key);
                if (audio) {
                    audio.currentTime = 0;
                    audio.volume = volume / 100;
                    audio.play();
                    setDisplayText(drumPad.id);
                    
                    const padElement = document.getElementById(`pad-${drumPad.key}`);
                    if (padElement) {
                        padElement.classList.add('active');
                        setTimeout(() => {
                            padElement.classList.remove('active');
                        }, 100);
                    }
                }
            }, [powerOn, volume]);

            const handleKeyDown = useCallback((event) => {
                if (!powerOn) return;
                
                const key = event.key.toUpperCase();
                const drumPad = drumPads.find(pad => pad.key === key);
                
                if (drumPad) {
                    playSound(drumPad);
                }
            }, [powerOn, playSound]);
            
            useEffect(() => {
                window.addEventListener('keydown', handleKeyDown);
                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                };
            }, [handleKeyDown]);
            
            const togglePower = () => {
                setPowerOn(prev => {
                    const newState = !prev;
                    setDisplayText(newState ? 'Power On' : 'Power Off');
                    return newState;
                });
            };
            
            const handleVolumeChange = (e) => {
                if (!powerOn) return;
                const newVolume = e.target.value;
                setVolume(newVolume);
                setDisplayText(`Volume: ${newVolume}%`);
            };
            
            return (
                <div id="drum-machine" className="bg-white rounded-2xl p-6 md:p-8 w-full max-w-3xl shadow-2xl border border-slate-200">
                    <div className="flex flex-col-reverse md:flex-row gap-6 md:gap-8">
                        <div className="flex flex-col justify-between space-y-6 w-full md:w-56 bg-slate-50 p-6 rounded-xl border border-slate-200">
                            <div className="flex items-center justify-between">
                                <span className="text-slate-800 font-bold">Power</span>
                                <div 
                                    className={`power-toggle ${powerOn ? 'on' : ''}`}
                                    onClick={togglePower}
                                >
                                    <div className="power-toggle-handle"></div>
                                </div>
                            </div>
                            
                            <div id="display" className="bg-slate-200 text-center p-4 rounded-lg w-full h-16 flex items-center justify-center shadow-inner">
                                <div className="text-indigo-600 text-lg font-semibold tracking-wider truncate">
                                    {powerOn ? displayText : ''}
                                </div>
                            </div>
                            
                            <div className="w-full">
                                <div className="text-slate-800 text-center mb-2 font-bold">Volume</div>
                                <input 
                                    type="range" 
                                    min="0" 
                                    max="100" 
                                    value={volume} 
                                    onChange={handleVolumeChange}
                                    className="w-full"
                                    disabled={!powerOn}
                                />
                            </div>
                        </div>

                        <div className="grid grid-cols-3 gap-4 flex-1">
                            {drumPads.map((drumPad) => (
                                <div 
                                    key={drumPad.key}
                                    id={`pad-${drumPad.key}`}
                                    className="drum-pad bg-white text-slate-600 text-2xl font-semibold rounded-xl p-4 flex items-center justify-center cursor-pointer aspect-square"
                                    onClick={() => playSound(drumPad)}
                                >
                                    {drumPad.key}
                                    <audio 
                                        id={drumPad.key} 
                                        className="clip" 
                                        src={drumPad.url}
                                    ></audio>
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    <div className="mt-6 text-center text-slate-400 text-xs">
                        <p>Built with React & Tailwind CSS</p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<DrumMachine />, document.getElementById('root'));
    </script>
</body>
</html>
